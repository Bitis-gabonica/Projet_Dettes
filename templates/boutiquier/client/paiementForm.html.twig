{% extends 'base.html.twig' %}

{% block body %}
<div class="p-6 bg-white rounded-lg shadow">
    <h2 class="text-lg font-bold text-blue-600 mb-4">Paiement</h2>

    <!-- Bouton pour ouvrir la popup -->
    <button
        id="openModalButton"
        class="px-4 py-2 bg-indigo-500 text-white rounded-lg shadow hover:bg-indigo-600"
        data-modal-target="paiementModal"
    >
        Ajouter un Paiement
    </button>

    <!-- Modal -->
    <div
        id="paiementModal"
        class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden"
    >
        <div class="bg-white p-6 rounded-lg shadow-lg w-1/3">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-lg font-bold text-blue-600">Ajouter un Paiement</h2>
                <button
                    id="closeModalButton"
                    class="text-gray-500 hover:text-gray-700"
                >
                    &times;
                </button>
            </div>

            <!-- Formulaire de paiement -->
            {{ form_start(form) }}
            <div class="space-y-4">
                <div>
                    {{ form_row(form.date, {'label': 'Date de Paiement', 'attr': {'class': 'block w-full px-4 py-2 border border-gray-300 rounded-md'}}) }}
                </div>
                <div>
                    {{ form_row(form.montant, {'label': 'Montant', 'attr': {'class': 'block w-full px-4 py-2 border border-gray-300 rounded-md'}}) }}
                </div>
                {{ form_row(form.dette, {'label': 'Dette', 'attr': {'class': 'hidden'}}) }}
            </div>

            <!-- Bouton de soumission -->
            <div class="mt-6">
                <button type="submit" class="w-full bg-indigo-500 text-white font-medium py-2 px-6 rounded-lg shadow hover:bg-indigo-600">
                    Enregistrer
                </button>
            </div>
            {{ form_end(form) }}
        </div>
    </div>
</div>

<script>
    // Afficher la modal
    document.getElementById('openModalButton').addEventListener('click', function () {
        document.getElementById('paiementModal').classList.remove('hidden');
    });

    // Fermer la modal
    document.getElementById('closeModalButton').addEventListener('click', function () {
        document.getElementById('paiementModal').classList.add('hidden');
    });

    // Fermer la modal lorsqu'on clique à l'extérieur
    window.addEventListener('click', function (event) {
        const modal = document.getElementById('paiementModal');
        if (event.target === modal) {
            modal.classList.add('hidden');
        }
    });
</script>
{% endblock %}
